<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purpose Quest LITE</title>
    {% include '_common_head.html' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='productStyle.css') }}">
</head>

<body class="d-flex text-center" id="productBody">
    <div class="cover-container d-flex w-100 min-vh-100 mx-auto px-0 flex-column">
        {% include 'welcome_modal.html' %}
        {% include 'header.html' %}

        <div class="progress">
            <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="50"
                class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar"
                style="width: 0%"></div>
        </div>
        <main class="container align-items-center d-flex flex-column" style="min-height: 80vh;">
            <div class="row w-100">
                <div class="col pt-5">
                    <div class="safe-icon" id="safeIcon">
                    </div>
                </div>
                <div class="col pt-5">
                    <div class="d-flex justify-content-center align-items-start">
                        <div class="info-icon" id="productInfo">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                class="feather feather-heart">
                                <path
                                    d="M12 20.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Zm0-6a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm.053-3.533a7.8 7.8 0 0 1 .92-.767 6.97 6.97 0 0 0 .746-.61 2.31 2.31 0 0 0 .468-.635c.126-.253.188-.548.188-.883 0-.374-.082-.723-.246-1.048-.158-.324-.415-.588-.771-.792-.356-.203-.81-.305-1.362-.305-.575 0-1.045.116-1.411.347a1.991 1.991 0 0 0-.788.89c-.06.134-.11.272-.148.413-.111.414-.445.767-.874.767-.428 0-.784-.35-.71-.772.07-.407.2-.79.386-1.15.301-.583.758-1.048 1.37-1.394C10.435 6.176 11.185 6 12.07 6c.93 0 1.687.181 2.273.544.59.358 1.014.803 1.271 1.337.257.533.386 1.07.386 1.608 0 .545-.085 1.012-.254 1.403-.17.385-.375.698-.616.94-.235.242-.55.514-.943.817-.312.247-.561.46-.747.635-.18.176-.33.385-.451.627-.05.099-.087.2-.113.302-.108.424-.422.787-.86.787-.437 0-.806-.356-.76-.79a2.948 2.948 0 0 1 .797-1.743Z">
                                </path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>


            <div id="dynamicContent" class="row align-items-center my-auto pb-3">
            </div>
        </main>
        {% include 'account_footer.html' %}
    </div>

    <div aria-live="polite" aria-atomic="true" class="position-relative">
        <div id="toast-container" class="position-absolute top-0 end-0"></div>
    </div>

    </div>
    <div id="product-data" data-product-slug="{{ product_slug }}" data-token-id="{{ token_id }}"></div>



    <script type="module">
        //product.html
        import { initializeProduct } from '/static/js/purposeQuest/_init.js';
        import { setTokenId, setProductSlug } from '/static/js/purposeQuest/tokenModule.js';
        import { btnLoader } from '/static/js/addLoader.js';

        document.addEventListener('DOMContentLoaded', async () => {
            const productDataElement = document.getElementById("product-data");
            const localTokenId = productDataElement ? productDataElement.getAttribute("data-token-id") : null;
            const localProductSlug = productDataElement ? productDataElement.getAttribute("data-product-slug") : null;
            const openModal = document.getElementById('productInfo');
            const btns = document.querySelectorAll('#acctBtn');
            console.log(localTokenId, localProductSlug);
            setTokenId(localTokenId);
            setProductSlug(localProductSlug);
            initializeProduct();
            btnLoader(btns);


            openModal.addEventListener('click', function () {
                console.log("Product info clicked");
                document.getElementById('welcomeModal').classList.add('show');
            })

        });

    </script>
</body>

</html>