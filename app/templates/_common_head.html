<meta name="viewport" content="width=device-width, initial-scale=1.0">


<!--
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
-->

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<link rel="stylesheet" href="{{ static_file_url('essentials.css') }}">
<link rel="stylesheet" href="{{ static_file_url('theme.css') }}">
<link rel="stylesheet" href="{{ static_file_url('style.css') }}">
<link rel="icon" type="image/jpg" href="/static/images/favicon.png">

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scroll/16.1.3/smooth-scroll.min.js"
    integrity="sha512-HYG9E+RmbXS7oy529Nk8byKFw5jqM3R1zzvoV2JnltsIGkK/AhZSzciYCNxDMOXEbYO9w6MJ6SpuYgm5PJPpeQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://js.stripe.com/v3/"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-H0P6LBLZ4B"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-H0P6LBLZ4B');
</script>

<script>
    (function () {
        var script = document.createElement('script');
        script.src = '/static/js/disableLogging.js'; // Primary path
        script.onerror = function () {
            // If the script fails to load from the primary path, load from the alternative path
            var backupScript = document.createElement('script');
            backupScript.src = '../static/js/disableLogging.js'; // Backup path
            document.head.appendChild(backupScript);
        };
        document.head.appendChild(script);
    })();
</script>
<script>
(function () {
    var link = document.createElement('link');
    link.rel = 'icon';
    link.type = 'image/png';
    link.sizes = '16x16';
    link.href = 'static/images/favicon.png'; // Primary path

    var backupLink = document.createElement('link');
    backupLink.rel = 'icon';
    backupLink.type = 'image/png';
    backupLink.sizes = '16x16';
    backupLink.href = '/../static/images/favicon.png'; // Backup path

    // Append the backup link first
    document.head.appendChild(backupLink);

    // Then try to append the primary link
    document.head.appendChild(link);
})();
</script>

<script type="module">
    async function keepSessionAlive() {
        try {
            const res = await fetch('/auth/refresh_session', {
                method: 'GET',
                credentials: 'include'
            });
            const data = await res.json();
            console.log("[Session] Refreshed:", data);
        } catch (e) {
            console.warn("[Session] Refresh failed:", e);
        }
    }

    document.addEventListener("DOMContentLoaded", () => {
        const userElement = document.getElementById("user-id");
        const userId = userElement?.getAttribute("data-user-id");

        if (userId) {
            console.log("[Session] User detected, enabling keep-alive polling.");
            setInterval(keepSessionAlive, 10 * 60 * 1000); // every 10 minutes
            keepSessionAlive(); // initial call
        } else {
            console.log("[Session] No user detected, skipping polling.");
        }
    });
</script>